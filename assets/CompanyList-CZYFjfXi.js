import{_ as W,W as U,r as p,a as G,o as H,d as l,w as o,e as d,g as J,b as y,h as s,u as z,n as K,S as X,V as Y,I as S}from"./index-DBLKM03n.js";const Z={class:"company-list"},ee={class:"search-header"},le={class:"pagination"},oe={class:"dialog-footer"},ae={__name:"CompanyList",setup(te){const q=J(),i=U({name:"",region:[],creditCode:""}),V=[{value:"beijing",label:"北京市",children:[{value:"chaoyang",label:"朝阳区"},{value:"haidian",label:"海淀区"}]},{value:"shanghai",label:"上海市",children:[{value:"pudong",label:"浦东新区"},{value:"xuhui",label:"徐汇区"}]}],g=p(1),v=p(10),E=p(100),m=p(!1),_=p("add"),b=p(null),n=U({name:"",region:[],creditCode:""}),j={name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],region:[{required:!0,message:"请选择地区",trigger:"change"}],creditCode:[{required:!0,message:"请输入统一信用代码",trigger:"blur"}]},B=p([{id:1,name:"示例科技有限公司",region:["beijing","chaoyang"],creditCode:"91110105MA12345678",qualificationCount:5,createTime:"2024-03-15 10:00:00"}]),T=()=>{console.log("搜索条件：",i)},R=()=>{Object.keys(i).forEach(t=>{i[t]=t==="region"?[]:""})},F=()=>{_.value="add",m.value=!0,Object.keys(n).forEach(t=>{n[t]=t==="region"?[]:""})},O=t=>{_.value="edit",m.value=!0,Object.keys(n).forEach(e=>{e in t&&(n[e]=t[e])})},$=t=>{q.push({name:"qualification-list",query:{companyId:t.id}})},I=t=>{Y.confirm("确定要删除该企业吗？删除后将无法恢复。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{S.success("删除成功")})},L=async()=>{b.value&&await b.value.validate((t,e)=>{t?(console.log("提交表单：",n),S.success(_.value==="add"?"新增成功":"编辑成功"),m.value=!1):console.log("表单验证失败：",e)})},M=t=>{v.value=t},N=t=>{g.value=t};return(t,e)=>{const f=d("el-input"),u=d("el-form-item"),h=d("el-cascader"),C=d("el-icon"),r=d("el-button"),A=d("Refresh"),k=d("el-form"),x=d("el-card"),c=d("el-table-column"),P=d("el-table"),D=d("el-pagination"),Q=d("el-dialog");return H(),G("div",Z,[l(x,{class:"search-section"},{default:o(()=>[y("div",ee,[l(k,{inline:!0,model:i,class:"search-form"},{default:o(()=>[l(u,{label:"企业名称"},{default:o(()=>[l(f,{modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=a=>i.name=a),placeholder:"请输入企业名称"},null,8,["modelValue"])]),_:1}),l(u,{label:"地区"},{default:o(()=>[l(h,{modelValue:i.region,"onUpdate:modelValue":e[1]||(e[1]=a=>i.region=a),options:V,placeholder:"请选择地区"},null,8,["modelValue"])]),_:1}),l(u,{label:"统一信用代码"},{default:o(()=>[l(f,{modelValue:i.creditCode,"onUpdate:modelValue":e[2]||(e[2]=a=>i.creditCode=a),placeholder:"请输入统一信用代码"},null,8,["modelValue"])]),_:1}),l(u,null,{default:o(()=>[l(r,{type:"primary",onClick:T},{default:o(()=>[l(C,null,{default:o(()=>[l(z(K))]),_:1}),e[10]||(e[10]=s(" 搜索 "))]),_:1,__:[10]}),l(r,{onClick:R},{default:o(()=>[l(C,null,{default:o(()=>[l(A)]),_:1}),e[11]||(e[11]=s(" 重置 "))]),_:1,__:[11]})]),_:1})]),_:1},8,["model"]),l(r,{type:"primary",onClick:F},{default:o(()=>[l(C,null,{default:o(()=>[l(z(X))]),_:1}),e[12]||(e[12]=s(" 新增企业 "))]),_:1,__:[12]})])]),_:1}),l(x,{class:"list-section"},{default:o(()=>[l(P,{data:B.value,style:{width:"100%"}},{default:o(()=>[l(c,{prop:"name",label:"企业名称","min-width":"200"}),l(c,{prop:"region",label:"地区",width:"180"}),l(c,{prop:"creditCode",label:"统一信用代码",width:"180"}),l(c,{prop:"qualificationCount",label:"资质数量",width:"100"}),l(c,{prop:"createTime",label:"创建时间",width:"180"}),l(c,{label:"操作",width:"200",fixed:"right"},{default:o(({row:a})=>[l(r,{link:"",type:"primary",onClick:w=>O(a)},{default:o(()=>e[13]||(e[13]=[s("编辑")])),_:2,__:[13]},1032,["onClick"]),l(r,{link:"",type:"primary",onClick:w=>$(a)},{default:o(()=>e[14]||(e[14]=[s("查看资质")])),_:2,__:[14]},1032,["onClick"]),l(r,{link:"",type:"danger",onClick:w=>I(a)},{default:o(()=>e[15]||(e[15]=[s("删除")])),_:2,__:[15]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),y("div",le,[l(D,{"current-page":g.value,"onUpdate:currentPage":e[3]||(e[3]=a=>g.value=a),"page-size":v.value,"onUpdate:pageSize":e[4]||(e[4]=a=>v.value=a),total:E.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:M,onCurrentChange:N},null,8,["current-page","page-size","total"])])]),_:1}),l(Q,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=a=>m.value=a),title:_.value==="add"?"新增企业":"编辑企业",width:"500px"},{footer:o(()=>[y("span",oe,[l(r,{onClick:e[8]||(e[8]=a=>m.value=!1)},{default:o(()=>e[16]||(e[16]=[s("取消")])),_:1,__:[16]}),l(r,{type:"primary",onClick:L},{default:o(()=>e[17]||(e[17]=[s("确定")])),_:1,__:[17]})])]),default:o(()=>[l(k,{model:n,"label-width":"100px",rules:j,ref_key:"companyFormRef",ref:b},{default:o(()=>[l(u,{label:"企业名称",prop:"name"},{default:o(()=>[l(f,{modelValue:n.name,"onUpdate:modelValue":e[5]||(e[5]=a=>n.name=a),placeholder:"请输入企业名称"},null,8,["modelValue"])]),_:1}),l(u,{label:"地区",prop:"region"},{default:o(()=>[l(h,{modelValue:n.region,"onUpdate:modelValue":e[6]||(e[6]=a=>n.region=a),options:V,placeholder:"请选择地区"},null,8,["modelValue"])]),_:1}),l(u,{label:"统一信用代码",prop:"creditCode"},{default:o(()=>[l(f,{modelValue:n.creditCode,"onUpdate:modelValue":e[7]||(e[7]=a=>n.creditCode=a),placeholder:"请输入统一信用代码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},de=W(ae,[["__scopeId","data-v-89152243"]]);export{de as default};
